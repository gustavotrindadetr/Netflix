for(i in 1:25){
dsRaces[i] <- json[i]$MRData$RaceTable$Races
}
json[1]$MRData$RaceTable$Races
json[2]$MRData$RaceTable$Races
json[2]$MRData$RaceTable$Races
json[3]$MRData$RaceTable$Races
(fromJSON(url[1]))
(fromJSON(url[2]))
json[1]
json[2]
dsRaces <- json[1]$MRData$RaceTable$Races
dsRaces
dsRaces <- json[2]$MRData$RaceTable$Races
dsRaces
json[2]
json$MRData$RaceTable$Races
json[2]$MRData$RaceTable$Races
json[2]
json[[1]]$RaceTable$Races
json[[2]]$RaceTable$Races
for(i in 1:25){
dsRaces[i] <- json[[i]]$MRData$RaceTable$Races
}
dsRaces[1]
dsRaces[[1]]
json[[1]]$MRData$RaceTable$Races
json[[2]]$MRData$RaceTable$Races
json[1]
json[2]
json[1]$MRData
json[2]$MRData
json[[2]]$MRData
for(i in 1:25){
dsRaces[i] <- json[[i]]$RaceTable$Races
}
dsRaces
dsRaces[[1]]
dsRaces[1]
json[[i]]$RaceTable
json[[i]]$RaceTable$Races
colnames(dsRaces)
colnames(dsRaces[1])
colnames(dsRaces[[1]])
json[[1]]$RaceTable$Races
json[[2]]$RaceTable$Races
json[[2]]$RaceTable
json[[2]]$RaceTable$Races
dsRaces[i] <- json[[i]]$RaceTable
dsRaces[1]
dsRaces
dsRaces[i] <- json[[i]]
dsRaces
json[[1]]
json
json[1]
json[1]$MRData
json$MRData
View(json)
(fromJSON(url[1]))
apagar_json <- (fromJSON(url[1]))
apagar_json <- (fromJSON(url[2]))
apagar_json$MRData
View(apagar_json)
View(json)
View(dsRaces)
View(apagar_json)
apagar_json[1] <- (fromJSON(url[1]))
View(apagar_json)
apagar_json[2] <- (fromJSON(url[2]))
View(apagar_json)
json[[2]]
json[[2]]$RaceTable
json[[2]]$RaceTable$Races
json[[2]]$RaceTable$Races[[1]]$Driver
json[[2]]$RaceTable$Races$Results[[1]]$Driver
json[[2]]$RaceTable$Races$Results[[1]]
View(json)
json[[1]]$RaceTable$Races$Results[[1]]
json[[1]]$RaceTable$Races
View(apagar_json)
rm(aoagar_json)
rm(apagar_json)
dsRaces[1]
json[[1]]
View(dsRaces)
json[[1]]$RaceTable$Races
json[[1]]
json[[1]]$RaceTable$Races
View(json)
# Selecionanto apenas os campos necessários e criando ID para as corridas
for(i in 1:25) {
dsF1[i] <- dsRaces[i]$RaceTable$Races
}
# Criando a variável com todas as corridas
for(i in 1:25){
dsRaces[i] <- json[[i]]$RaceTable$Races
}
View(dsRaces)
json[[1]]$RaceTable$Races ## Pra fazer funcionar
json[[1]] ## Pra fazer funcionar
json[[2]] ## Pra fazer funcionar
json[1] ## Pra fazer funcionar
json[2] ## Pra fazer funcionar
dsRaces[1]$
json[1] ## Pra fazer funcionar
dsRaces[1]$
json[1] ## Pra fazer funcionar
dsRaces[1]$
json ## Pra fazer funcionar
View(json)
dsRaces[1]$
json[[1]] ## Pra fazer funcionar
View(json)
json$MRData
json[1]$MRData
json[2]$MRData
json[2]
json[[2]]
dfJason <- structure(json, class = "data.frame")
View(dfJason)
rm(dfJason)
# Criando a variável com todas as corridas
for(i in 1:25){
dsRaces[i] <- json[[i]]$RaceTable$Races
}
View(dsRaces)
# Criando a variável com todas as corridas
for(i in 1:25){
dsRaces[i] <- json[i]
}
View(dsRaces)
dsRaces[1]
dsRaces[1] %>%
select(season, raceName, date)
dsRaces[[1]]$series
dsRaces[[1]]$RaceTable
# Selecionanto apenas os campos necessários e criando ID para as corridas
for(i in 1:25) {
dsF1[i] <- dsRaces[i]$RaceTable %>%
dsF1[i][c(season, round, raceName,date)]
}
dsRaces[[1]]$RaceTable[c(season, round, raceName,date)]
dsRaces[[1]]$RaceTable[c("season", "round", "raceName", "date")]
dsRaces[[1]]$RaceTable
dsRaces[[1]]$RaceTable[c("season", "round", "raceName", "date")]
colnames(dsRaces[1])
colnames(dsRaces[[1]]$RaceTable)
colnames(dsRaces[[1]]$RaceTable$Races)
dsRaces[[1]]$RaceTable$Races[c("season", "round", "raceName", "date")]
dsRaces[[1]]$RaceTable$Races[c(rownames_to_column(var = "raceId"),"season", "round", "raceName", "date")]
dsRaces[[1]]$RaceTable$Races[c("season", "round", "raceName", "date")]
dsRaces[[1]]$RaceTable$Races[c("season", "round", "raceName", "date", rownames_to_column(var = "raceId"))]
dsRaces[[1]]$RaceTable$Races[c("season", "round", "raceName", "date")]
dsRaces[[1]]$RaceTable$Races[c("season", "round", "raceName", "date")] %>%
rownames_to_column(var = "raceId")
dsRaces[[1]]$RaceTable$Races[c("season", "round", "raceName", "date")]
dsRaces[[1]]$RaceTable$Races[c("season", "round", "raceName", "date")] %>%
mutate(id = 1)
dsRaces[[1]]$RaceTable$Races[c("season", "round", "raceName", "date")] %>%
mutate(tabId = 1)
# Selecionanto apenas os campos necessários e criando ID para as corridas
for(i in 1:25) {
dsF1[i] <- dsRaces[[i]]$RaceTable$Races[c("season", "round", "raceName", "date")] %>%
mutate(tabId = i)
}
dsF1 <- dsRaces[[1]]$RaceTable$Races[c("season", "round", "raceName", "date")] %>%
mutate(tabId = 1)
# Selecionanto apenas os campos necessários e criando ID para as corridas
for(i in 1:25) {
dsF1[i] <- dsRaces[[i]]$RaceTable$Races[c("season", "round", "raceName", "date")] %>%
mutate(tabId = i)
}
View(dsF1)
dsF1[1]
dsF1[2]
View(dsF1)
View(dsRaces)
View(dsF1)
dsF1 <- dsRaces[[1]]$RaceTable$Races[c("season", "round", "raceName", "date")] %>%
mutate(tabId = 1)
dsF1[1] <- dsRaces[[1]]$RaceTable$Races[c("season", "round", "raceName", "date")] %>%
mutate(tabId = 1)
dsF1[1] <- dsRaces[[1]]$RaceTable$Races[c("season", "round", "raceName", "date")] %>%
mutate(tabId = 1)
dsF1[1]
rm(dsF1)
dsF1 <- dsRaces[[1]]$RaceTable$Races[c("season", "round", "raceName", "date")] %>%
mutate(tabId = 1)
View(dsF1)
dsF1[1] <- dsRaces[[1]]$RaceTable$Races[c("season", "round", "raceName", "date")] %>%
mutate(tabId = 1)
dsF1[1] <- dsRaces[[1]]$RaceTable$Races[c("season", "round", "raceName", "date")] #%>%
View(dsF1)
View(dsF1)
dsF1 <- dsRaces[[1]]$RaceTable$Races[c("season", "round", "raceName", "date")] #%>%
dsF1[1] <- dsRaces[[1]]$RaceTable$Races[c("season", "round", "raceName", "date")] #%>%
dsF1 <- dsRaces[[1]]$RaceTable$Races[c("season", "round", "raceName", "date")] #%>%
dsF1 <- dsRaces[[2]]$RaceTable$Races[c("season", "round", "raceName", "date")] #%>%
dsF1 <- dsRaces[[2]]
dsF1[1] <- dsRaces[[2]]
dsF1[1] <- dsRaces[[1]]
View(dsF1)
dsF1[2] <- dsRaces[[2]]
View(dsF1)
dsF1[2] <- dsRaces[[2]]$RaceTable
View(dsF1)
dsF1[1] <- dsRaces[[1]]$RaceTable
View(dsF1)
dsF1 <- dsRaces[[1]]$RaceTable
View(dsF1)
dsF1[1] <- dsRaces[[1]]$RaceTable
dsF1[2] <- dsRaces[[2]]$RaceTable
View(dsF1)
# Selecionanto apenas os campos necessários e criando ID para as corridas
for(i in 1:25) {
dsF1[i] <- dsRaces[[i]]$RaceTable
}
View(dsF1)
# Selecionanto apenas os campos necessários e criando ID para as corridas
for(i in 1:25) {
dsF1[i] <- dsRaces[[i]]$RaceTable %>%
dsF1[1]$Races[c("season", "round", "raceName", "date")] %>%
mutate(tabId = 1)
}
# Selecionanto apenas os campos necessários e criando ID para as corridas
for(i in 1:25) {
dsF1[i] <- dsRaces[[i]]$RaceTable %>%
dsF1[1]$Races
}
# Selecionanto apenas os campos necessários e criando ID para as corridas
for(i in 1:25) {
dsF1[i] <- dsRaces[[i]]$RaceTable %>%
dsF1[i]$Races
}
# Selecionanto apenas os campos necessários e criando ID para as corridas
for(i in 1:25) {
dsF1[i] <- dsRaces[[i]]$RaceTable
}
# Selecionanto apenas os campos necessários e criando ID para as corridas
for(i in 1:25) {
dsF1_i <- dsRaces[[i]]$RaceTable
}
# Selecionanto apenas os campos necessários e criando ID para as corridas
for(i in 1:25) {
dsF1_i <- dsRaces[[i]]$RaceTable
}
rm(dsF1_i)
dsF1[[1]][c("season", "round", "raceName", "date")] %>%
mutate(tabId = 1)
dsF1[[2]][c("season", "round", "raceName", "date")] %>%
mutate(tabId = 2)
View(dsRaces)
View(dsF1)
# Criando a variável com todas as corridas
for(i in 1:25){
dsRaces[i] <- json[[i]]$RaceTable
}
View(dsRaces)
dsRaces[[1]][c("season", "round", "raceName", "date")] %>%
mutate(tabId = 1)
rm(dsF1)
View(dsRaces)
test <- rbindlist(dsRaces)
install.packages("data.table")
library(data.table)
test <- rbindlist(dsRaces)
rbindlist(dsRaces)
structure(dsRaces, as = "data.frame")
dfRaces <- structure(dsRaces, as = "data.frame")
View(dfRaces)
View(dsRaces)
View(dfRaces)
rm(dfRaces)
# Criando a variável com todas as corridas
for(i in 1:25){
dsRaces[i] <- json[[i]]$RaceTable %>%
dsRaces[[i]][c("season", "round", "raceName", "date")] %>%
mutate(tabId = i)
}
# Criando a variável com todas as corridas
for(i in 1:25){
dsRaces[i] <- json[[i]]$RaceTable %>%
}
dsRaces[i] <- json[[i]]$RaceTable
dsRaces[i] <- json[[i]]$RaceTable
# Criando a variável com todas as corridas
for(i in 1:25){
dsRaces[i] <- json[[i]]$RaceTable
}
dsRaces[[1]][c("season", "round", "raceName", "date")] %>%
mutate(tabId = 1)
teste <- g
for(g in 1:10){
teste <- g
}
teste
for(g in 1:10){
testeg <- g
}
for(g in 1:10){
paste0("teste",g) <- g
}
for(g in 1:10){
assign(paste0("teste",g), g)
}
rm(g)
rm(teste)
rm(teste1)
rm(teste2)
rm(teste3)
rm(teste4)
rm(teste5)
rm(teste6)
rm(teste7)
rm(teste8)
rm(teste9)
rm(teste10)
rm(testeg)
# Criando a variável com todas as corridas
for(i in 1:lenght(json)){
dsRaces[i] <- json[[i]]$RaceTable
}
# Criando a variável com todas as corridas
for(i in 1:length(json)){
dsRaces[i] <- json[[i]]$RaceTable
}
assign(paste0("dsRace",1),
dsRaces[[1]][c("season", "round", "raceName", "date")] %>%
mutate(tabId = 1)
)
for(i in 1:length(dsRaces)){
assign(paste0("dsRace",i),
dsRaces[[i]][c("season", "round", "raceName", "date")] %>%
mutate(tabId = i)
)
}
dsRace1
dsRace2
View(dsRace1)
View(dsRace10)
View(dsRace10)
tabRaces <- rbind(dsRace1,dsRace2,dsRace3)
tabRaces
tabRaces <- rbind(dsRace*)
tabRaces <- rbind(dsRace*)
tabRaces <- rbind(dsRace1:dsRace25)
tabRaces <- rbind(dsRace1, dsRace2, dsRace3, dsRace4, dsRace5, dsRace6, dsRace7, dsRace8, dsRace9, dsRace10, dsRace11, dsRace12, dsRace13, dsRace14, dsRace15, dsRace16, dsRace17, dsRace18, dsRace19, dsRace20, dsRace21, dsRace22, dsRace23, dsRace24, dsRace25)
tab_races
tabRaces
write.csv(lista_2_clusters, file = 'lista_cluster_2.csv')
library(FactoMineR)
library(factoextra)
library(cluster)
library(readxl)
library(eeptools)
library(dplyr)
library(zoo)
library(tibble)
base_clus <- read_xlsx("ds_base_analise_cluster.xlsx", sheet = 2)
base_orig <-read_xlsx("ds_base_analise_cluster.xlsx", sheet = 1)
## Transforma em Escala
ds_clus <- base_clus[,-1]
base_scaled <- scale(ds_clus)
## Quantidade ótima de Cluster
fviz_nbclust(base_scaled, kmeans, method = "gap_stat")
## Gera Kmeans
kmean_base <- kmeans(base_scaled,2)
## Visualização
fviz_cluster(kmean_base, data = base_scaled)
## Lista de Clientes dos Clusters
lista_2_clusters <- cbind(base_orig, kmean_base$cluster)
write.csv(lista_2_clusters, file = 'lista_cluster_2.csv')
## Gera Kmeans
kmean_base <- kmeans(base_scaled,3)
lista_3_clusters <- cbind(base_orig, kmean_base$cluster)
## Gera Kmeans
kmean_base <- kmeans(base_scaled,4)
lista_4_clusters <- cbind(base_orig, kmean_base$cluster)
write.csv(lista_2_clusters, file = 'lista_cluster_2.csv')
write.csv(lista_3_clusters, file = 'lista_cluster_3.csv')
write.csv(lista_4_clusters, file = 'lista_cluster_4.csv')
## Gera Kmeans
kmean_base <- kmeans(base_scaled,2)
## Visualização
fviz_cluster(kmean_base, data = base_scaled)
kmean_base
View(lista_2_clusters)
View(base_clus)
View(base_orig)
View(base_clus)
ds_imdb_title
library(dplyr)
library(tidyr)
library(rvest)
library(quantmod)
library(httr)
## Read CSV ##
df1 <- read.csv("netflix_titles.csv", header = T, sep = ',', encoding = "UTF-8")
setwd("~/GitHub/Netflix/Bases")
## Read CSV ##
df1 <- read.csv("netflix_titles.csv", header = T, sep = ',', encoding = "UTF-8")
## Fix Duration and Cast columns ##
ds_netflix_titles <- df1 %>%
separate(duration, into = c("duration_num","duration_type"), sep =  " ") %>%
separate_rows(cast, sep = ", ")
## Export file ##
write.csv2(ds_netflix_titles, "ds_netflix_titles.csv", sep = ';')
## URL Wikipedia ##
oscars_url <- "https://en.wikipedia.org/wiki/List_of_Academy_Award-winning_films"
## Using X-Path ##
ds_oscars <- read_html(oscars_url) %>%
html_node(xpath = '//*[@id="mw-content-text"]/div[1]/table') %>%
html_table() %>%
select(title = Film, Awards)
write.csv2(ds_oscars, "ds_oscars.csv", sep = ";")
## URL IMDB ##
imdb_url <- "https://www.imdb.com/chart/top/?ref_=nv_mv_250"
## Getting the title names in english ##
ds_imdb_title <- imdb_url %>%
html_session(add_headers("Accept-Language" = "en")) %>%
read_html() %>%
html_nodes(".titleColumn a") %>%
html_text()
ds_imdb_title
## Getting the Imbd rating ##
ds_imdb_rating <- read_html(imdb_url) %>%
html_node(".imdbRating") %>%
html_text()
ds_imdb_rating
## Getting the Imbd rating ##
ds_imdb_rating <- read_html(imdb_url) %>%
html_node(".imdbRating strong") %>%
html_text()
ds_imdb_rating
## Getting the Imbd rating ##
ds_imdb_rating <- read_html(imdb_url) %>%
html_node(".ratingColumn.imdbRating strong") %>%
html_text()
ds_imdb_rating
## Getting the Imbd rating ##
ds_imdb_rating <- read_html(imdb_url) %>%
html_nodes(".ratingColumn.imdbRating strong") %>%
html_text()
ds_imdb_rating
## Getting the Imbd rating ##
ds_imdb_rating <- read_html(imdb_url) %>%
html_nodes(".imdbRating strong") %>%
html_text()
ds_imdb_rating
ds_imdb_title
ds_imdb_rating
## Creating imbd table ##
cbind(ds_imdb_title,ds_imdb_rating)
## Creating imbd table ##
ds_imdb <- cbind(ds_imdb_title,ds_imdb_rating)
View(ds_imdb)
## Creating imbd table ##
ds_imdb <- as.tibble(cbind(ds_imdb_title,ds_imdb_rating))
library(tibble)
## Creating imbd table ##
ds_imdb <- as.tibble(cbind(ds_imdb_title,ds_imdb_rating))
View(ds_imdb)
## Creating imbd table ##
ds_imdb <- as.tibble(cbind(title = ds_imdb_title,rating = ds_imdb_rating))
View(ds_imdb)
## Export file ##
write.csv2(ds_imdb, "ds_imdb.csv", sep = ";")
library(quantmod)
ds_stonks <- getSymbols("NFLX", src = "yahoo"))
ds_stonks <- getSymbols("NFLX", src = "yahoo")
View(NFLX)
getSymbols("NFLX", src = "yahoo")
ds_stonks <- NFLX %>%
rownames_to_column(var = "date")
ds_stonks <- as.data.frame(NFLX) %>%
rownames_to_column(var = "date")
View(ds_stonks)
ds_stonks <- as.data.frame(NFLX) %>%
rownames_to_column(var = "date") %>%
select(date, price = NFLX.Close, volume = NFLX.Volume)
View(ds_stonks)
## Export File ##
write.csv2(ds_stonks, "ds_stonks.csv", sep = ";")
View(ds_imdb)
View(ds_imdb)
## Fix rownames and selecting Close and Volume columns ##
ds_stonks <- as.data.frame(NFLX) %>%
rownames_to_column(var = "date") %>%
select(date, price = NFLX.Close, volume = format(NFLX.Volume, decimal.mark = ','))
## Fix rownames and selecting Close and Volume columns ##
ds_stonks <- as.data.frame(NFLX) %>%
rownames_to_column(var = "date") %>%
select(date, price = NFLX.Close, volume = NFLX.Volume) %>%
mutate(format(volume, decimal.mark = ','))
View(ds_imdb)
## Fix rownames and selecting Close and Volume columns ##
ds_stonks <- as.data.frame(NFLX) %>%
rownames_to_column(var = "date") %>%
select(date, price = NFLX.Close, volume = NFLX.Volume) %>%
mutate(format(volume, big.mark = ','))
View(ds_imdb)
options(OutDec = ',')
## Fix rownames and selecting Close and Volume columns ##
ds_stonks <- as.data.frame(NFLX) %>%
rownames_to_column(var = "date") %>%
select(date, price = NFLX.Close, volume = NFLX.Volume)
ds_stonks
ds_imdb
View(ds_stonks)
View(ds_oscars)
View(ds_imdb)
